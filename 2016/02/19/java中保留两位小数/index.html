<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> JAVA中的保留两位小数 · pheobusyy</title><meta name="description" content="JAVA中的保留两位小数 - yanyi"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://pheobusyy.github.io/atom.xml" title="pheobusyy"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">JAVA中的保留两位小数</h1><div class="post-info">Feb 19, 2016</div><div class="post-content"><p>在java中，保留两位小数有很多种方法，其中主要思路有痛过NumberFormat等格式化数字或者通过BigDecimal来设置精度处理，下面列出了常用的4种方法。</p>
<a id="more"></a>
<h2 id="一-JAVA方法实现"><a href="#一-JAVA方法实现" class="headerlink" title="一. JAVA方法实现"></a>一. JAVA方法实现</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>  通过设置BigDecimal的精度来处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">parseDoubleDecimal</span><span class="params">(<span class="keyword">double</span> d)</span> </span>&#123;</div><div class="line">  BigDecimal bigDecimal = <span class="keyword">new</span> BigDecimal(d);</div><div class="line">  <span class="keyword">return</span> bigDecimal.setScale(<span class="number">2</span>, BigDecimal.ROUND_HALF_UP).doubleValue()+<span class="string">""</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>  通过DecimalFormat的setMaximumFractionDigits设置最长小数位数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">parseDoubleDecimal2</span><span class="params">(<span class="keyword">double</span> d)</span> </span>&#123;</div><div class="line">  NumberFormat decimalFormat = DecimalFormat.getInstance();</div><div class="line">  decimalFormat.setMaximumFractionDigits(<span class="number">2</span>);</div><div class="line">  <span class="keyword">return</span> decimalFormat.format(d);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h3><p>  通过DecimalFormat的format方法来格式化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">parseDoubleDecimal3</span><span class="params">(<span class="keyword">double</span> d)</span> </span>&#123;</div><div class="line">  NumberFormat decimalFormat = <span class="keyword">new</span>  DecimalFormat(<span class="string">"##.00"</span>);</div><div class="line">  <span class="keyword">return</span> decimalFormat.format(d);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="方法四"><a href="#方法四" class="headerlink" title="方法四"></a>方法四</h3><p>  通过String的format方法来格式化</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">parseDoubleDecimal4</span><span class="params">(<span class="keyword">double</span> d)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> String.format(<span class="string">"%.2f"</span>,d);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="方法五"><a href="#方法五" class="headerlink" title="方法五"></a>方法五</h3><p>  通过Formatter的format方法来格式化，和方法四类似</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">parseDoubleDecimal5</span><span class="params">(<span class="keyword">double</span> d)</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Formatter().format(<span class="string">"%.2f"</span>, d);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><p>  什么情况下可以避免科学计数法，和NumberFormat的format方法中pattern详解</p>
<h3 id="如何避免科学计数法"><a href="#如何避免科学计数法" class="headerlink" title="如何避免科学计数法"></a>如何避免科学计数法</h3><p>  在java中，如果浮点数大于999999.0的时候，会通过科学计数法莱显示浮点数，所以在编程的时候要注意   如何避免科学计数法，可以通过下面提供的方法来避免科学计数法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">      BigDecimal bigDecimal = <span class="keyword">new</span> BigDecimal(<span class="string">"123456789.123456789"</span>);  </div><div class="line">      String result = bigDecimal.toString();  </div><div class="line">      System.out.println(result);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    Double double1 = <span class="number">123456789.123456789</span>;  </div><div class="line">    DecimalFormat decimalFormat = <span class="keyword">new</span> DecimalFormat(<span class="string">"#,##0.00"</span>);<span class="comment">//格式化设置  </span></div><div class="line">    System.out.println(decimalFormat.format(double1));  </div><div class="line">    System.out.println(double1);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="关于format的pattern详解"><a href="#关于format的pattern详解" class="headerlink" title="关于format的pattern详解"></a>关于format的pattern详解</h3><p>  pattern转义符表格</p>
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th style="text-align:center">位置</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">数字</td>
<td style="text-align:center">数字</td>
</tr>
<tr>
<td style="text-align:center">#</td>
<td style="text-align:center">数字</td>
<td style="text-align:center">数字，如果是0就不显示</td>
</tr>
<tr>
<td style="text-align:center">.</td>
<td style="text-align:center">数字</td>
<td style="text-align:center">小数和整数分隔符</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">数字</td>
<td style="text-align:center">负数</td>
</tr>
<tr>
<td style="text-align:center">,</td>
<td style="text-align:center">数字</td>
<td style="text-align:center">整数分隔符</td>
</tr>
<tr>
<td style="text-align:center">E</td>
<td style="text-align:center">数字</td>
<td style="text-align:center">科学计数法分隔符</td>
</tr>
<tr>
<td style="text-align:center">;</td>
<td style="text-align:center">分隔符</td>
<td style="text-align:center">多个pattern之间分隔符</td>
</tr>
<tr>
<td style="text-align:center">%</td>
<td style="text-align:center">前缀后缀</td>
<td style="text-align:center">百分位</td>
</tr>
<tr>
<td style="text-align:center">‘</td>
<td style="text-align:center">前缀后缀</td>
<td style="text-align:center">转义符号</td>
</tr>
<tr>
<td style="text-align:center">\u2030</td>
<td style="text-align:center">前缀后缀</td>
<td style="text-align:center">千分位</td>
</tr>
<tr>
<td style="text-align:center">\u00A4</td>
<td style="text-align:center">前缀后缀</td>
<td style="text-align:center">货币符号</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDecimalFormatPattern</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> d = <span class="number">100000.0009</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        testPattern(<span class="string">"##.##"</span>);</div><div class="line">        testPattern(<span class="string">"00.##"</span>);</div><div class="line">        testPattern(<span class="string">"##.00"</span>);</div><div class="line">        testPattern(<span class="string">",###.00"</span>);</div><div class="line">        testPattern(<span class="string">",##.00"</span>);</div><div class="line">        testPattern(<span class="string">"0.00E0"</span>);</div><div class="line">        testPattern(<span class="string">"##%"</span>);</div><div class="line">        testPattern(<span class="string">"###,##0.00"</span>);</div><div class="line">        testPattern(<span class="string">"###\u2030"</span>);</div><div class="line">        testPattern(<span class="string">"###\u00A4"</span>);</div><div class="line">        testPattern(<span class="string">"'#'#.##"</span>);</div><div class="line">        testPattern(<span class="string">"''##.##"</span>);</div><div class="line">        testPattern(<span class="string">"AAAA##.##"</span>);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testPattern</span><span class="params">(String pattern)</span> </span>&#123;</div><div class="line">        DecimalFormat decimalFormat = <span class="keyword">new</span> DecimalFormat(pattern);</div><div class="line">        System.out.println(<span class="string">"pattern="</span> + pattern + <span class="string">" -----&gt;"</span> + decimalFormat.format(d));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<pre><code>输出:
pattern=00.## -----&gt;100000
pattern=##.00 -----&gt;100000.00
pattern=,###.00 -----&gt;100,000.00
pattern=,##.00 -----&gt;10,00,00.00
pattern=0.00E0 -----&gt;1.00E5
pattern=##% -----&gt;10000000%
pattern=###,##0.00 -----&gt;100,000.00
pattern=###‰ -----&gt;100000001‰
pattern=###¤ -----&gt;100000￥
pattern=&apos;#&apos;#.## -----&gt;#100000
pattern=&apos;&apos;##.## -----&gt;&apos;100000
pattern=AAAA##.## -----&gt;AAAA100000
</code></pre><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li><a href="http://blog.csdn.net/yuhua3272004/article/details/3075436" title="java保留两位小数" target="_blank" rel="external">java保留两位小数</a></li>
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html" title="DecimalFormat" target="_blank" rel="external">DecimalFormat api</a></li>
</ol>
</div></article></div></main><footer><div class="paginator"><a href="/2016/03/01/android 知识点/" class="prev">上一篇</a><a href="/2016/02/19/android的flux架构分析/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://pheobusyy.github.io">yanyi</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>