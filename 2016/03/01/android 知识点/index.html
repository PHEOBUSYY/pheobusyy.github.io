<!DOCTYPE html><html class="has-navbar-fixed-top" lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title></title><script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script><link rel="stylesheet" type="text/css" href="/css/bulma.css"><link rel="stylesheet" type="text/css" href="/css/justyan.css"><link rel="stylesheet" type="text/css" href="/highlight/styles/dracula.css"><link rel="icon" href="/img/favicon.png"></head><body><section class="hero is-info is-medium"><div class="hero-head"><nav class="navbar is-fixed-top is-info"><div class="container"><div class="navbar-brand"><a class="navbar-item"><img class="navbar-circle" src="https://avatars2.githubusercontent.com/u/9360264?s=50&amp;u=5e88482f7319a8ce65ed618bcede72ea97a7f5aa&amp;v=4"></a><span class="navbar-burger burger" data-target="navbarMenuHeroA"><span></span><span></span><span></span></span></div><div class="navbar-menu" id="navbarMenuHeroA"><div class="navbar-end"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/category">Categories</a><a class="navbar-item" href="/contact">Contact</a><span class="navbar-item"><a class="button is-info is-inverted" href="https://github.com/PHEOBUSYY"><span class="icon"><i class="fab fa-github"></i></span><span>Github</span></a></span></div></div></div></nav></div><div class="hero-body"><div class="has-text-centered"><h1 class="title">android知识点</h1><h2 class="subtitle">2016-03-01</h2></div></div><div class="hero-foot"></div></section><div id="content-outer"><div id="content-inner"><article id="post"><div id="toc"><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ActivityLifecycleCallbacks的使用"><span class="toc-number">1.</span> <span class="toc-text">ActivityLifecycleCallbacks的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么在theme设置layoutmargin等以layout开头的属性无效"><span class="toc-number">2.</span> <span class="toc-text">为什么在theme设置layoutmargin等以layout开头的属性无效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何修改全局的view属性，比如改变当前activity或者application的button背景"><span class="toc-number">3.</span> <span class="toc-text">如何修改全局的view属性，比如改变当前activity或者application的button背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#动态设置textView的drawableLeft"><span class="toc-number">4.</span> <span class="toc-text">动态设置textView的drawableLeft</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码中设置TextView或者RadioButton的文字selector"><span class="toc-number">5.</span> <span class="toc-text">代码中设置TextView或者RadioButton的文字selector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#popupWindow无法嵌入fragment"><span class="toc-number">6.</span> <span class="toc-text">popupWindow无法嵌入fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#java代码中设置editText的输入类型-TYPE-NUMBER-FLAG-DECIMAL-无效的问题"><span class="toc-number">7.</span> <span class="toc-text">java代码中设置editText的输入类型 TYPE_NUMBER_FLAG_DECIMAL 无效的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#android-中的LayoutInflater-inflate和View-inflate方法的区别"><span class="toc-number">8.</span> <span class="toc-text">android 中的LayoutInflater.inflate和View.inflate方法的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#android创建自定义属性的注意事项"><span class="toc-number">9.</span> <span class="toc-text">android创建自定义属性的注意事项</span></a></li></ol></div></div><div class="post-text"><p>android知识点汇总</p>
<h2 id="ActivityLifecycleCallbacks的使用"><a href="#ActivityLifecycleCallbacks的使用" class="headerlink" title="ActivityLifecycleCallbacks的使用"></a>ActivityLifecycleCallbacks的使用</h2><p>  ActivityLifecycleCallbacks用来在application中统一监听activity的生命周期回调</p>
<h2 id="为什么在theme设置layoutmargin等以layout开头的属性无效"><a href="#为什么在theme设置layoutmargin等以layout开头的属性无效" class="headerlink" title="为什么在theme设置layoutmargin等以layout开头的属性无效"></a>为什么在theme设置layout<em>margin等以layout</em>开头的属性无效</h2><p>  这是因为以layout_开头的属性是用来告诉父控件如何放置该控件位置的，必须明确了外部viewGroup的类型之后才可以生效，   所以在theme中设置无效，需要在具体调用的xml中设置对应的style才可以生效</p>
<p>  <a href="http://stackoverflow.com/questions/3775587/to-use-layout-marginleft-in-a-button-style-applied-as-a-theme" title="To use layout_marginLeft in a button style applied as a theme?" target="_blank" rel="external">  To use layout_marginLeft in a button style applied as a theme?</a></p>
<h2 id="如何修改全局的view属性，比如改变当前activity或者application的button背景"><a href="#如何修改全局的view属性，比如改变当前activity或者application的button背景" class="headerlink" title="如何修改全局的view属性，比如改变当前activity或者application的button背景"></a>如何修改全局的view属性，比如改变当前activity或者application的button背景</h2><p>  方法一.theme中引用style，然后设置为当前activity的theme</p>
<pre><code class="xml">  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;resources&gt;
  &lt;style name=&quot;MyRedTheme&quot; parent=&quot;android:Theme.Light&quot;&gt;
    &lt;item name=&quot;android:textAppearance&quot;&gt;@style/MyRedTextAppearance&lt;/item&gt;
  &lt;/style&gt;
  &lt;style name=&quot;MyRedTextAppearance&quot; parent=&quot;@android:style/TextAppearance&quot;&gt;
    &lt;item name=&quot;android:textColor&quot;&gt;#F00&lt;/item&gt;
    &lt;item name=&quot;android:textStyle&quot;&gt;bold&lt;/item&gt;
  &lt;/style&gt;
&lt;/resources&gt;
</code></pre>
<p>  方法二.自定义一个view</p>
<pre><code class="java">  public class RedTextView extends TextView{
    public RedTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setTextColor(Color.RED);
    }
  }
</code></pre>
<p>  <a href="http://stackoverflow.com/questions/3078081/setting-global-styles-for-views-in-android" title="Setting global styles for Views in Android" target="_blank" rel="external">  Setting global styles for Views in Android</a><br> <a id="more"></a></p>
<h2 id="动态设置textView的drawableLeft"><a href="#动态设置textView的drawableLeft" class="headerlink" title="动态设置textView的drawableLeft"></a>动态设置textView的drawableLeft</h2><p>  方法一.</p>
<pre><code class="java">  Drawable img = getContext().getResources().getDrawable( R.drawable.smiley );
  img.setBounds( 0, 0, 60, 60 );
  txtVw.setCompoundDrawables( img, null, null, null );
</code></pre>
<p>  方法二.</p>
<pre><code class="java">  Drawable img = getContext().getResources().getDrawable( R.drawable.smiley );
  txtVw.setCompoundDrawablesWithIntrinsicBounds( img, null, null, null);
</code></pre>
<p>  方法三.</p>
<pre><code class="java">  txtVw.setCompoundDrawablesWithIntrinsicBounds( R.drawable.smiley, 0, 0, 0);
</code></pre>
<p>  <a href="http://stackoverflow.com/questions/4502605/how-to-programatically-set-drawableleft-on-android-button" title="How to programatically set drawableLeft on Android button?" target="_blank" rel="external">  How to programatically set drawableLeft on Android button?</a></p>
<h2 id="代码中设置TextView或者RadioButton的文字selector"><a href="#代码中设置TextView或者RadioButton的文字selector" class="headerlink" title="代码中设置TextView或者RadioButton的文字selector"></a>代码中设置TextView或者RadioButton的文字selector</h2><p>  常用的做法是在res/color文件夹下放置对应的selector，然后在xml中引用 android:textColor=”@color/selector”,本以为在java代码中调用<br>  setTextColor(context.getResources().getColor(R.color.selector))好使的,结果没有起作用。。。。<br>  后来在stackoverflow中找到了解决方法，调用setTextColor(context.getResources().getColorStateList(R.color.selector));解决了问题</p>
<p>  <a href="http://stackoverflow.com/questions/9982182/using-selector-to-change-textview-text-color" title="Using selector to change TextView text color" target="_blank" rel="external">  Using selector to change TextView text color</a></p>
<h2 id="popupWindow无法嵌入fragment"><a href="#popupWindow无法嵌入fragment" class="headerlink" title="popupWindow无法嵌入fragment"></a>popupWindow无法嵌入fragment</h2><p>  原因是fragment需要放入归属于activity中的某个容器，popupWindow不归属于ativity所以无法嵌入fragment</p>
<p>  <a href="http://stackoverflow.com/questions/8044593/properly-creating-a-fragment-in-a-popupwindow" title="Properly creating a fragment in a PopupWindow" target="_blank" rel="external">Properly creating a fragment in a PopupWindow</a></p>
<h2 id="java代码中设置editText的输入类型-TYPE-NUMBER-FLAG-DECIMAL-无效的问题"><a href="#java代码中设置editText的输入类型-TYPE-NUMBER-FLAG-DECIMAL-无效的问题" class="headerlink" title="java代码中设置editText的输入类型 TYPE_NUMBER_FLAG_DECIMAL 无效的问题"></a>java代码中设置editText的输入类型 TYPE_NUMBER_FLAG_DECIMAL 无效的问题</h2><p>  需要设置为</p>
<pre><code class="java">  editText.setInputType(InputType.TYPE_NUMBER_FLAG_DECIMAL|InputType.TYPE_CLASS_NUMBER);
</code></pre>
<p>  才能生效。并且如果在xml中设置了</p>
<pre><code class="xml">  android:inputType=&quot;numberDecimal&quot;
</code></pre>
<p>  代码中判断</p>
<pre><code class="java">  editText.getInputType() == InputType.TYPE_NUMBER_FLAG_DECIMAL
</code></pre>
<p>  返回false，道理是一样的，应该判断为</p>
<pre><code class="java">  editText.getInputType() == (InputType.TYPE_NUMBER_FLAG_DECIMAL | InputType.TYPE_CLASS_NUMBER)
</code></pre>
<p>  <a href="http://stackoverflow.com/questions/31914388/androidinputtype-numberdecimal-vs-inputtype-type-number-flag-decimal" title="android:inputType=“numberDecimal” vs. InputType.TYPE_NUMBER_FLAG_DECIMAL" target="_blank" rel="external">android:inputType=“numberDecimal” vs. InputType.TYPE_NUMBER_FLAG_DECIMAL</a></p>
<h2 id="android-中的LayoutInflater-inflate和View-inflate方法的区别"><a href="#android-中的LayoutInflater-inflate和View-inflate方法的区别" class="headerlink" title="android 中的LayoutInflater.inflate和View.inflate方法的区别"></a>android 中的LayoutInflater.inflate和View.inflate方法的区别</h2><p>  实际上View.inflate内部调用了LayoutInflater.inflate(resource, root, root != null)方法</p>
<pre><code class="java">  public View inflate(@LayoutRes int resource, @Nullable ViewGroup root, boolean attachToRoot)
</code></pre>
<p>  在上面的inflate方法中，第一个是布局id，第二个是父容器对象，第三个是是否把view添加到前面的父容器中。<br>  默认情况下如果第二个父容器传入null，那么view的layoutParam属性会被清空，也就是说view在父容器中的位置信息（lyaout_param）会丢失.所以在以后的使用的时候<br>  应该把父容器对象传入，但是第三个参数设置为false不把view添加到父容器中。</p>
<p>  <a href="http://bxbxbai.github.io/2014/11/19/make-sense-of-layoutinflater/" title="LayoutInflater.inflate方法解析" target="_blank" rel="external">LayoutInflater.inflate方法解析</a></p>
<h2 id="android创建自定义属性的注意事项"><a href="#android创建自定义属性的注意事项" class="headerlink" title="android创建自定义属性的注意事项"></a>android创建自定义属性的注意事项</h2><p>  在主工程中使用自定义属性的时候命名空间使用的当前程序的包名，如果是在子工程中定义的属性，命名空间需要使用 “res-auto”</p>
<pre><code>  xmlns:custom=&quot;http://schemas.android.com/apk/res-auto&quot;
</code></pre></div></article><div></div></div></div><div id="bottom-outer"><div id="bottom-inner"><span>Site construction by</span><span> JustYan </span><span>using</span><a href="http://hexo.io"><span>hexo blog framework</span></a><span>.</span><br><a href="/">Home</a></div></div><script src="/js/justyan.js"></script><script src="/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>