<!DOCTYPE html><html class="has-navbar-fixed-top" lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title></title><script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script><link rel="stylesheet" type="text/css" href="/css/bulma.css"><link rel="stylesheet" type="text/css" href="/css/justyan.css"><link rel="stylesheet" type="text/css" href="/highlight/styles/dracula.css"><link rel="icon" href="/img/favicon.png"></head><body><section class="hero is-info is-medium"><div class="hero-head"><nav class="navbar is-fixed-top is-info"><div class="container"><div class="navbar-brand"><a class="navbar-item"><img class="navbar-circle" src="https://avatars2.githubusercontent.com/u/9360264?s=50&amp;u=5e88482f7319a8ce65ed618bcede72ea97a7f5aa&amp;v=4"></a><span class="navbar-burger burger" data-target="navbarMenuHeroA"><span></span><span></span><span></span></span></div><div class="navbar-menu" id="navbarMenuHeroA"><div class="navbar-end"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/category">Categories</a><a class="navbar-item" href="/contact">Contact</a><span class="navbar-item"><a class="button is-info is-inverted" href="https://github.com/PHEOBUSYY"><span class="icon"><i class="fab fa-github"></i></span><span>Github</span></a></span></div></div></div></nav></div><div class="hero-body"><div class="has-text-centered"><h1 class="title">android 反编译相关</h1><h2 class="subtitle">2017-05-27</h2></div></div><div class="hero-foot"></div></section><div id="content-outer"><div id="content-inner"><article id="post"><div id="toc"><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#apktool"><span class="toc-number">1.</span> <span class="toc-text">apktool</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dex2jar"><span class="toc-number">2.</span> <span class="toc-text">dex2jar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JD-GUI"><span class="toc-number">3.</span> <span class="toc-text">JD-GUI</span></a></li></ol></div></div><div class="post-text"><p>  今天单位的考勤软件更新了，怀着好奇的心情想看下这个软件内部的代码结构代码。拿到手的是一个 <strong>apk</strong> 文件，那么下面要做的就是如何处理这个 <strong>apk</strong> 文件了。主要分这么三步：</p>
<ol>
<li>通过 <strong>apktool</strong> 查看里面的资源和图片文件</li>
<li>通过 <strong>dex2jar</strong> 把 <strong>dex</strong> 文件转换为 <strong>jar</strong></li>
<li>通过 <strong>jd2gui</strong> 来查看java文件代码结构</li>
</ol>
<h3 id="apktool"><a href="#apktool" class="headerlink" title="apktool"></a>apktool</h3><p>  apktools的官方下载目录在 <a href="https://ibotpeaches.github.io/Apktool/" title="apktool官网" target="_blank" rel="external">这里</a> ，不同的操作系统对应不同的安装方法。这里用的mac所以分为两步</p>
<ol>
<li>右键保存一个脚本文件，命名为 <strong>apktool</strong></li>
<li>下载最新的apktool jar包</li>
<li>重命名下载的jar包为 <strong>apktool.jar</strong></li>
<li>把上面的脚本文件和jar包放入目录 <em>/usr/local/bin</em></li>
<li>保证两个文件都是可执行的 (可以通过 <strong>chmod +x</strong> 命令修改可执行)</li>
<li><p>在终端中输入 <strong>apktool</strong> 来确认安装是否成功。</p>
<p>apktool 有两个常用的命令 <em>d</em> <em>b</em> 。</p>
</li>
<li><em>d</em> 代表反编译apk ，格式为 <em>apktool d apk制定路径名称</em></li>
<li><em>b</em> 代表重打包apk ，格式为 <em>apktool b apk反编译文件夹路径</em><br>3.</li>
</ol>
<h3 id="dex2jar"><a href="#dex2jar" class="headerlink" title="dex2jar"></a>dex2jar</h3><p>  通过 dex2jar 这个软件来转换dex为jar包。dex2jar 的下载目录在 <a href="https://github.com/pxb1988/dex2jar/releases" title="dex2jar下载" target="_blank" rel="external">这里</a>。<br>  下载下来之后是一个文件夹里面有一堆 sh 脚本，通过脚本的名字可以很容易找到他们的作用。注意这里的sh脚本不一定都是可执行的，所以如果发现没有执行权限的时候可以通过 （chmod +x ）来修改。</p>
<p>  注意：dex2jar在v2.1版本之前是不支持 android multiDex 的，也就是不管你有多少个dex文件，他都是只会处理第一个。如果使用v2.1版本的话dex2jar会自动合并所有的dex文件到一个jar包中。在下载的时候要注意这个版本，上面给出的链接是v2.1版本的所有是可以直接使用的。</p>
<p>  使用方法也很简单：</p>
<pre><code>  sh ~/dex2jar-2.1-SNAPSHOT/d2j-dex2jar.sh apk路径名称
</code></pre><p>  最后在同一个目录中会生成一个jar包。</p>
<h3 id="JD-GUI"><a href="#JD-GUI" class="headerlink" title="JD-GUI"></a>JD-GUI</h3><p>  JD-GUI是一个可视化的jar包查看工具，通过它可以看到jar包中的源代码。<br>  下载地址在 <a href="http://jd.benow.ca/" title="jd-gui下载" target="_blank" rel="external">这里</a> ，找到对应的平台下载使用就可以。</p>
<p>  注意：这里我用的mac sierra系统下载了对应的dmg文件之后无法使用，点击直接报错了。后来没办法通过 java -jar的方法是直接调用jar包的方法来解决。具体步骤就是直接把JD-GUI的jar下载下来，然后通过 <strong>java -jar jar对应路径</strong> 的方式来启动。</p>
</div></article><div></div></div></div><div id="bottom-outer"><div id="bottom-inner"><span>Site construction by</span><span> JustYan </span><span>using</span><a href="http://hexo.io"><span>hexo blog framework</span></a><span>.</span><br><a href="/">Home</a></div></div><script src="/js/justyan.js"></script><script src="/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>